#docker 

В Dockerfile две важные инструкции, которые определяют, какой исполняемый файл будет запущен при старте контейнера, это **`CMD`** и **`ENTRYPOINT`**. Хотя обе инструкции выглядят похожими, между ними есть ключевые отличия в поведении и назначении.

Инструкция **`CMD`**

Задает команду и её аргументы по умолчанию, которые будут выполнены при запуске контейнера. Однако, если при запуске контейнера указаны любые другие команды, они заменят команду, заданную через него. Это делает его идеальным выбором для задания параметров по умолчанию, которые могут быть переопределены пользователем при запуске контейнера.

Пример:

````css
```dockerfile
FROM ubuntu
CMD ["echo", "Hello, world!"]
```
````

При запуске этого контейнера без дополнительных параметров, будет выведено "Hello, world!". Но если при запуске указать другую команду, например **`docker run <image> echo "Hello, Docker!"`**, то будет выведено "Hello, Docker!".

Инструкция **`ENTRYPOINT`**

Конфигурирует контейнер так, что он будет запущен как исполняемый файл. Аргументы, указанные при запуске контейнера, передаются в него как дополнительные аргументы. Это означает, что команда, заданная в него, не заменяется, а дополняется аргументами, указанными при запуске контейнера.

Пример:

````css
```dockerfile
FROM ubuntu
ENTRYPOINT ["echo", "Hello,"]
CMD ["world!"]
```
````

Здесь, если контейнер запущен без дополнительных аргументов, вывод будет "Hello, world!". Если же запустить контейнер с дополнительными аргументами, например **`docker run <image> Docker`**, то вывод будет "Hello, Docker".

Основные отличия

**1. Переопределение команды: `CMD`** может быть полностью переопределена при запуске контейнера, в то время как **`ENTRYPOINT`** предопределяет базовую команду, и любые аргументы, указанные при запуске, добавляются к этой команде.  
**2. Использование в комбинации:** Часто **`ENTRYPOINT`** используется в комбинации с **`CMD`**, где **`ENTRYPOINT`** задает исполняемый файл, а **`CMD`** задает аргументы по умолчанию, которые могут быть переопределены при запуске.

**`CMD`** и **`ENTRYPOINT`** обе определяют, какая команда будет выполнена при запуске Docker-контейнера, но делают это по-разному. **`CMD`** лучше использовать для задания параметров по умолчанию, которые могут быть изменены, а **`ENTRYPOINT`** для установки фиксированной базовой команды, к которой можно добавлять аргументы.

-----

**`ENTRYPOINT` и `CMD`** — это две инструкции, которые определяют команду и параметры, исполняемые при запуске контейнера. Они похожи, но служат немного разным целям и взаимодействуют между собой определенным образом.

**`ENTRYPOINT`**Определяет исполняемый файл, который будет запущен при старте контейнера. Он фактически устанавливает постоянную базовую команду, к которой затем можно добавить дополнительные аргументы при запуске контейнера. Это можно использовать, например, чтобы сделать контейнер ведущим себя как исполняемый файл.

```dockerfile
# Используется официальный образ Python
FROM python:3.8

# Устанавливаем рабочий каталог
WORKDIR /app

# Копируем исходный код в контейнер
COPY . /app

# Устанавливаем зависимости
RUN pip install -r requirements.txt

# Устанавливаем entrypoint
ENTRYPOINT ["python", "app.py"]
```

В этом примере, он устанавливает команду **`python app.py`** как команду, которая будет выполнена при запуске контейнера.

**`CMD`**Предоставляет аргументы по умолчанию для **`ENTRYPOINT`**. Если **`ENTRYPOINT`** не указан, то он также может быть использован для указания исполняемой команды. Однако, если **`ENTRYPOINT`** указан, **`CMD`** предоставляет дополнительные аргументы к этой команде.

```dockerfile
# Используется официальный образ Python
FROM python:3.8

# Устанавливаем рабочий каталог
WORKDIR /app

# Копируем исходный код в контейнер
COPY . /app

# Устанавливаем зависимости
RUN pip install -r requirements.txt

# Устанавливаем entrypoint и cmd
ENTRYPOINT ["python"]
CMD ["app.py"]
```

В этом случае **`ENTRYPOINT`** устанавливает команду **`python`**, а **`CMD`** предоставляет файл **`app.py`** как аргумент по умолчанию. Если при запуске контейнера указать другие аргументы, например **`docker run myimage hello.py`**, то **`CMD`** будет перезаписан, и вместо **`app.py`** будет выполнен **`hello.py`**.

**`ENTRYPOINT`** задает основную команду контейнера, а **`CMD`** предоставляет аргументы по умолчанию для этой команды. **`ENTRYPOINT`** как бы говорит "всегда выполняй это", а **`CMD`** добавляет "если не сказано иначе, используй эти параметры".