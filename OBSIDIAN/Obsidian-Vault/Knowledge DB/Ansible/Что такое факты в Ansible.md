#ansible 

**Факты** в [[Ansible]] это переменные, которые собираются с управляемых машин (managed hosts) в начале выполнения каждого плейбука. Предоставляют подробную информацию о системе, такую как сетевые интерфейсы, IP-адреса, информацию о операционной системе, свободное пространство на дисках и другие системные характеристики.

Сбор фактов

Собираются модулем **`setup`** в Ansible. Когда вы выполняете плейбук, Ansible по умолчанию автоматически вызывает этот модуль для сбора данных о всех управляемых машинах, если только сбор фактов не отключен. Вы можете отключить сбор фактов, используя **`gather_facts: no`** в начале плейбука, если вам не нужна информация о системе и вы хотите ускорить выполнение плейбука.

Использование:

Факты можно использовать для принятия решений во время выполнения плейбука. Например, можно создать условные задачи, которые будут выполняться только на определённых операционных системах, или настраивать настройки сети, основываясь на IP-адресе или MAC-адресе интерфейса.

```yaml
- name: Gather facts about VMs
  hosts: all
  tasks:
    - name: Print OS family
      debug:
        msg: "The OS family is {{ ansible_facts['os_family'] }}"
```

В этом примере, после сбора фактов, плейбук выводит семейство операционной системы управляемого хоста, используя переменную **`ansible_facts['os_family']`**.

Преимущества:

**1. Автоматизация на основе контекста:** Факты позволяют плейбукам адаптироваться к характеристикам окружения, что делает автоматизацию более гибкой и устойчивой.

**2. Упрощение управления конфигурациями:** Используя факты для определения специфических характеристик системы, можно избежать жесткого кодирования параметров, что упрощает поддержку и обновление плейбуков.

**3. Условное выполнение задач:** Факты могут быть использованы для определения, нужно ли выполнять определённые задачи на конкретном хосте, что повышает эффективность и точность выполнения плейбуков.

Факты — это переменные, содержащие данные о управляемых системах. Они помогают делать плейбуки более интеллектуальными и адаптивными к разным условиям окружающей среды и системным конфигурациям. Это как разведчики, которые собирают информацию перед началом основных операций.